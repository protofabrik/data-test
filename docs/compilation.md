"# Custom configuration\n\nIf you want to use a customized version of [SQLite3](https://www.sqlite.org) with `better-sqlite3`, you can do so by specifying the directory of your [custom amalgamation](https://www.sqlite.org/amalgamation.html) during installation.\n\n```bash\nnpm install better-sqlite3 --build-from-source --sqlite3=/path/to/sqlite-amalgamation\n```\n\nHowever, if you simply run `npm install` while `better-sqlite3` is listed as a dependency in your `package.json`, the required flags above will *not* be applied. Therefore, it's recommended that you remove `better-sqlite3` from your dependency list, and instead add a [`preinstall` script](https://docs.npmjs.com/misc/scripts) like the one shown below.\n\n```json\n{\n  \"scripts\": {\n    \"preinstall\": \"npm install better-sqlite3@'^7.0.0' --no-save --build-from-source --sqlite3=\\\"$(pwd)/sqlite-amalgamation\\\"\"\n  }\n}\n```\n\nYour amalgamation directory must contain `sqlite3.c` and `sqlite3.h`. Any desired [compile time options](https://www.sqlite.org/compile.html) must be defined directly within `sqlite3.c`.\n\n### Step by step example\n\nIf you're creating a package that relies on a custom build of `better-sqlite3`, you can follow these steps to get started.\n\n1. Download the SQLite3 source code from [their website](https://sqlite.com/download.html) (e.g., `sqlite-amalgamation-1234567.zip`)\n2. Unzip the compressed archive\n3. Move the `sqlite3.c` and `sqlite3.h` files to your project folder\n4. Add a `preinstall` script to your `package.json`, like the one shown above\n5. Make sure the `--sqlite3` flag points to the location of your `sqlite3.c` and `sqlite3.h` files\n6. Define your preferred [compile time options](https://www.sqlite.org/compile.html) at the top of `sqlite3.c`\n7. Run `npm install` in your project folder\n\nIf you're using a SQLite3 encryption extension that is a drop-in replacement for SQLite3 (such as [SEE](https://www.sqlite.org/see/doc/release/www/readme.wiki) or [sqleet](https://github.com/resilar/sqleet)), then simply replace `sqlite3.c` and `sqlite3.h` with the source files of your encryption extension.\n\n# Bundled configuration\n\nBy default, this distribution currently uses SQLite3 **version 3.32.0** with the following [compilation options](https://www.sqlite.org/compile.html):\n\n```\nSQLITE_DQS=0\nSQLITE_LIKE_DOESNT_MATCH_BLOBS\nSQLITE_THREADSAFE=2\nSQLITE_USE_URI=0\nSQLITE_DEFAULT_MEMSTATUS=0\nSQLITE_OMIT_DEPRECATED\nSQLITE_OMIT_GET_TABLE\nSQLITE_OMIT_TCL_VARIABLE\nSQLITE_OMIT_PROGRESS_CALLBACK\nSQLITE_OMIT_SHARED_CACHE\nSQLITE_TRACE_SIZE_LIMIT=32\nSQLITE_DEFAULT_CACHE_SIZE=-16000\nSQLITE_DEFAULT_FOREIGN_KEYS=1\nSQLITE_DEFAULT_WAL_SYNCHRONOUS=1\nSQLITE_ENABLE_COLUMN_METADATA\nSQLITE_ENABLE_UPDATE_DELETE_LIMIT\nSQLITE_ENABLE_STAT4\nSQLITE_ENABLE_FTS3_PARENTHESIS\nSQLITE_ENABLE_FTS3\nSQLITE_ENABLE_FTS4\nSQLITE_ENABLE_FTS5\nSQLITE_ENABLE_JSON1\nSQLITE_ENABLE_RTREE\nSQLITE_ENABLE_GEOPOLY\nSQLITE_INTROSPECTION_PRAGMAS\nSQLITE_SOUNDEX\n```\n"